<div class="w-full">
  <p-splitter class="m-0 p-0 h-screen">
    <ng-template #panel>
        
    
  @for (shoppinglist of shoppinglists; track shoppinglist) {
    <div  
      class="flex-grow-1 bg-gray-50 rounded-lg shadow-lg border-2 m-5" >
      <div class="p-3 bg-white" pDroppable (onDrop)="drop(shoppinglist)"
          >
        <h2 class="flex text-2xl items-baseline">
          <span class="font-bold text-lime-600">{{ shoppinglist.name }} </span>
          <button type="button" [routerLink]="['/artikel/new', shoppinglist.id]"
            pTooltip="Neuen Artikel anlegen"
          class="fas fa-plus ml-2 text-gray-500" ></button>
          <div class="grow"></div>
          <!-- a revoir
          @if (einkaufszettel.shoppingListActions) {
            <app-split-button [width]="'64'"
            [actions]="einkaufszettel.shoppingListActions"></app-split-button>
          }
            -->
        </h2>
        @for (item of shoppinglist.shoppingListItem | boughtArticles:false ; track item) {
          <div class="flex my-1 items-start" (mouseenter) ="mouseEnter() "  (mouseleave) ="mouseLeave()" >
            <p-checkbox class="mr-2 mt-1 rounded-full"
              [(ngModel)]="item.purchased"
              [binary]="true"
            (onChange)="modifyItem(shoppinglist, item)"></p-checkbox>
            <span class="text-primary font-semibold text-xl text-lime-600 mr-2">{{ item.quantity }}</span>
            <span class="text-primary font-semibold text-xl cursor-pointer hover:underline break-all"
              pTooltip="Artikel bearbeiten"
            [routerLink]="['/item', shoppinglist.id, item.id]">{{ item.part?.name }}</span>
            
              <span class="pi pi-shopping-cart" [hidden]="!iconVisible" (click)="modifyItem(shoppinglist, item)"></span> 

          </div>
        }
          <!--
        @for (item of shoppinglist.shoppingListItem | boughtArticles:false; track item) {
          <div class="flex my-1 items-start">
            <p-checkbox class="mr-2 mt-1 rounded-full"
              [(ngModel)]="item.purchaseDate"
              [binary]="true"
            (onChange)="changeArtikel(shoppinglist, item)"></p-checkbox>
            <span class="text-primary font-semibold text-xl text-lime-600 mr-2">{{ item.quantity }}</span>
            <span class="text-primary font-semibold text-xl cursor-pointer hover:underline break-all"
              pTooltip="Artikel bearbeiten"
            [routerLink]="['/artikel', shoppinglist.id, item.id]">{{ item.name }}</span>
          </div>
        }
      -->
      </div>
      <!--
      @if ((shoppinglist.shoppingListItem | boughtArticles:true); as boughtArticles) {
        <div
          class="border-t-2 px-3 bg-gray-50 text-gray-500">
          <div class="">
            @for (item of boughtArticles; track item) {
              <div class="flex my-1">
                <span class="fas fa-check text-primary font-semibold text-xl text-lime-600 mr-3"
                  pTooltip="Artikel zurücksetzen"
                (click)="changeArtikelGekauft(shoppinglist, item)"></span>
                <span class="text-primary font-semibold text-xl text-lime-600 mr-2">{{ item.quantity }}</span>
                <span class="text-primary font-semibold text-xl cursor-pointer hover:underline break-all"
                  pTooltip="Artikel bearbeiten"
                  [routerLink]="['/artikel', shoppinglist.id, item.id]" >{{ item.name }}</span>
                </div>
              }
            </div>
          </div>
        }
        -->
      </div>
  }

  @if(shoppinglists.length === 0) {
    <div  class="font-medium">
      <div class="text-gray-500" >
        {{ 'home.text1' | translate }}
        </div>
        <a routerLink="/einkaufszettel" class="text-lime-600"><span
          class="fas fa-cart-shopping text-lime-600 mr-2 text-xl"></span><ng-container >{{ 'home.text2' | translate }}</ng-container></a>
        </div>
  }
</ng-template>
<ng-template #panel>

<p-accordion value="0">
    <p-accordion-panel value="0">
      <p-accordion-header>{{ 'home.category' | translate }}</p-accordion-header>
      <p-accordion-content>
        @for (category of categorylist; track category) {
          <div class="flex-grow-1 bg-gray-50 rounded-lg shadow-lg border-2 m-5">
            <div class="p-3 bg-white">
              <h2 class="flex text-2xl items-baseline">
                <span class="font-bold text-lime-600">{{ category.name }} </span>
                <button type="button" [routerLink]="['/category', category.id]"
                  pTooltip="Détails"
                class="pi pi-pencil ml-2 text-gray-500" ></button>
                <div class="grow"></div>
              </h2>
            
          @for (part of category.parts; track part) {
            <div class="flex my-1 items-start" pDraggable  (onDragStart)="dragStart(part)"
            (onDragEnd)="dragEnd()">
            <span class="text-primary font-semibold text-xl cursor-pointer hover:underline break-all"
              pTooltip="Artikel bearbeiten"
            [routerLink]="['/part', part.id]">{{ part.name }}</span>
            </div>
          } 
        </div>
        </div>
          }
   
    </p-accordion-content>
  </p-accordion-panel>
</p-accordion>
</ng-template>
</p-splitter>
</div>
